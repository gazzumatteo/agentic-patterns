# Article 3: Intelligence & Learning Patterns

**Adaptive and Learning Patterns for Production AI Agents**

This directory contains comprehensive implementations of advanced agentic patterns focusing on intelligence, learning, optimization, fault tolerance, and monitoring. Each pattern is implemented in both **Google ADK** and **CrewAI** frameworks with production-ready code and realistic business use cases.

---

## =ï¿½ Pattern Categories

### 1. **Learning Agents** (`learning_agents/`)
Patterns that enable agents to learn, adapt, and discover through experience and exploration.

| Pattern | ADK | CrewAI | Description | Business Use Case |
|---------|-----|--------|-------------|-------------------|
| **Learning & Adaptation** |  |  | Agents modify strategy based on feedback | Manufacturing process optimization |
| **Exploration & Discovery** |  |  | Generate hypotheses from unrelated data | Scientific research across domains |
| **Evolutionary Curriculum** |  |  | Population-based algorithm evolution | Scheduling algorithm optimization |

### 2. **Optimization** (`optimization/`)
Patterns focused on resource management, cost optimization, and intelligent prioritization.

| Pattern | ADK | CrewAI | Description | Business Use Case |
|---------|-----|--------|-------------|-------------------|
| **Resource-Aware Optimization** |  |  | Dynamic model switching for cost control | 90% FAQ on cheap models, 10% complex on Pro |
| **Prioritization** |  |  | Task scheduling based on urgency/importance | Maintenance task prioritization |

### 3. **Fault Tolerance** (`fault_tolerance/`)
Patterns ensuring robustness, recovery, and resilience in production systems.

| Pattern | ADK | CrewAI | Description | Business Use Case |
|---------|-----|--------|-------------|-------------------|
| **Checkpoint & Rollback** |  |  | State management with rollback capability | Sensitive database operations |
| **Exception Handling** |  |  | Retry, fallback, and escalation strategies | Supply chain API error handling |

### 4. **Monitoring** (`monitoring/`)
Patterns for goal tracking, progress monitoring, and adaptive strategy adjustment.

| Pattern | ADK | CrewAI | Description | Business Use Case |
|---------|-----|--------|-------------|-------------------|
| **Goal Setting & Monitoring** |  |  | SMART goal tracking with dynamic adjustment | Sprint/project progress monitoring |

---

## =ï¿½ Quick Start

### Prerequisites

```bash
# Install uv (Python package manager)
curl -LsSf https://astral.sh/uv/install.sh | sh

# No additional installation needed - uv handles dependencies automatically
```

### Running Examples

#### Google ADK Examples

```bash
# Learning patterns
uv run adk-examples/learning_agents/01_learning_adaptation.py
uv run adk-examples/learning_agents/02_exploration_discovery.py
uv run adk-examples/learning_agents/03_evolutionary_curriculum.py

# Optimization patterns
uv run adk-examples/optimization/01_resource_aware_optimization.py
uv run adk-examples/optimization/02_prioritization.py

# Fault tolerance patterns
uv run adk-examples/fault_tolerance/01_checkpoint_rollback.py
uv run adk-examples/fault_tolerance/02_exception_handling.py

# Monitoring patterns
uv run adk-examples/monitoring/01_goal_setting_monitoring.py
```

#### CrewAI Examples

```bash
# Learning patterns
uv run crewai-examples/learning_agents/01_learning_adaptation.py
uv run crewai-examples/learning_agents/02_exploration_discovery.py
uv run crewai-examples/learning_agents/03_evolutionary_curriculum.py

# Optimization patterns
uv run crewai-examples/optimization/01_resource_aware_optimization.py
uv run crewai-examples/optimization/02_prioritization.py

# Fault tolerance patterns
uv run crewai-examples/fault_tolerance/01_checkpoint_rollback.py
uv run crewai-examples/fault_tolerance/02_exception_handling.py

# Monitoring patterns
uv run crewai-examples/monitoring/01_goal_setting_monitoring.py
```

---

## =ï¿½ Benchmarks

Comprehensive benchmark suite comparing ADK and CrewAI implementations.

### Run Benchmarks

```bash
# Cost analysis
uv run benchmarks/cost_analysis/compare_frameworks.py

# Performance tests
uv run benchmarks/performance_tests/benchmark_patterns.py

# Specific patterns only
uv run benchmarks/cost_analysis/compare_frameworks.py --patterns learning_adaptation,prioritization

# Export results
uv run benchmarks/cost_analysis/compare_frameworks.py --export json --output results/
```

### Key Findings

| Metric | ADK | CrewAI | Winner |
|--------|-----|--------|--------|
| **API Calls** | 33% fewer | Baseline | ADK |
| **Token Usage** | Baseline | 24% fewer | CrewAI |
| **Execution Time** | 20-35% faster | Baseline | ADK |
| **Memory Usage** | 25% lower | Baseline | ADK |
| **Success Rate** | 100% | 95% | ADK |
| **Ease of Use** | Complex | Simpler | CrewAI |

**Recommendation:**
- Use **ADK** for production systems requiring performance, reliability, and complex orchestration
- Use **CrewAI** for rapid prototyping, discrete tasks, and when developer experience is prioritized

See [`benchmarks/README.md`](./benchmarks/README.md) for detailed analysis.

---

## <ï¿½ Pattern Details

### Learning & Adaptation
**Business Context:** Manufacturing Process Optimization

An agent optimizes production parameters (cutting speed, feed rate) through iterative feedback loops, learning from quality metrics to achieve optimal performance.

**Key Features:**
- Iterative learning loop with quality feedback
- Dynamic parameter adjustment based on trends
- Knowledge base updates with learned insights
- Exit condition based on quality threshold

**ADK Strength:** Native `LoopAgent` with state management
**CrewAI Approach:** Sequential crew with manual iteration tracking

---

### Exploration & Discovery
**Business Context:** Scientific Research Hypothesis Generation

Multi-domain data exploration to discover hidden correlations and generate novel research hypotheses.

**Key Features:**
- Parallel exploration across 4 domains (climate, agriculture, economics, health)
- Correlation analysis between disparate datasets
- Novel hypothesis generation from discovered patterns
- Cross-domain insight synthesis

**ADK Strength:** Native `ParallelAgent` for concurrent exploration
**CrewAI Approach:** Independent agent tasks with shared context

---

### Evolutionary Curriculum
**Business Context:** Algorithm Optimization for Manufacturing

Population-based search evolving scheduling algorithms through selection, crossover, and mutation.

**Key Features:**
- Initial population with diverse strategies
- Fitness evaluation based on multiple metrics
- Generational evolution with elitism
- Convergence detection and termination

**ADK Strength:** Loop-based evolution with deterministic orchestration
**CrewAI Approach:** Iterative crew execution with population management

---

### Resource-Aware Optimization
**Business Context:** Cost Management with Dynamic Model Switching

Route queries to appropriate models based on complexity: cheap models for FAQs, powerful models for complex analysis.

**Key Features:**
- Query complexity analysis
- Dynamic model selection (Flash vs Pro)
- Cost tracking and statistics
- 60-70% cost savings vs uniform Pro model usage

**ADK Strength:** Model switching via configuration, native cost tracking
**CrewAI Approach:** Different agent definitions per model tier

---

### Prioritization
**Business Context:** Proactive Maintenance Task Scheduling

Intelligent scheduling of maintenance tasks considering urgency, importance, dependencies, and estimated time.

**Key Features:**
- Multi-factor priority scoring
- Dependency graph resolution
- Execution plan optimization
- Critical task identification

**ADK Strength:** Sequential orchestration with state-based prioritization
**CrewAI Approach:** Task context and hierarchical planning

---

### Checkpoint & Rollback
**Business Context:** Sensitive Data Management

Create checkpoints before risky operations with automatic rollback on failure or threshold violations.

**Key Features:**
- Pre-operation checkpoint creation
- Automatic rollback on errors
- Threshold-based safety checks
- Multiple checkpoint management

**ADK Strength:** Native session state management for checkpoints
**CrewAI Approach:** Custom checkpoint management in shared memory

---

### Exception Handling
**Business Context:** Supply Chain API Error Handling

Robust error handling with retry logic, fallback strategies, and human escalation.

**Key Features:**
- Automatic retry with exponential backoff
- Transient vs permanent error classification
- Fallback supplier execution
- Human escalation with context

**ADK Strength:** Built-in retry and fallback in Runner
**CrewAI Approach:** Custom error handling in tool implementations

---

### Goal Setting & Monitoring
**Business Context:** Sprint/Project Progress Monitoring

SMART goal tracking with continuous monitoring and adaptive strategy adjustment.

**Key Features:**
- SMART goal validation and creation
- Multi-metric progress tracking
- At-risk goal identification
- Dynamic strategy adjustment

**ADK Strength:** `LoopAgent` for continuous monitoring cycles
**CrewAI Approach:** Iterative crew execution with goal state

---

## <ï¿½ Architecture Patterns

### Google ADK Patterns

```python
# Sequential Workflow
sequential_agent = SequentialAgent(
    name="workflow",
    sub_agents=[agent1, agent2, agent3]
)

# Parallel Execution
parallel_agent = ParallelAgent(
    name="parallel_tasks",
    sub_agents=[explorer1, explorer2, explorer3]
)

# Iterative Loop
loop_agent = LoopAgent(
    name="learning_loop",
    sub_agents=[executor, analyzer, learner],
    exit_condition=lambda session: session.state.get("goal_achieved", False)
)
```

### CrewAI Patterns

```python
# Sequential Crew
crew = Crew(
    agents=[agent1, agent2, agent3],
    tasks=[task1, task2, task3],
    process=Process.sequential,
    verbose=True
)

# Task Dependencies
task2 = Task(
    description="Analyze results",
    agent=analyzer,
    context=[task1]  # Depends on task1
)

# Hierarchical Process
crew = Crew(
    agents=[manager, worker1, worker2],
    tasks=[task1, task2],
    process=Process.hierarchical,
    manager_llm="gpt-4"
)
```

---

## =ï¿½ Production Considerations

### Performance

| Pattern | Avg Execution Time | Token Usage | Memory Usage |
|---------|-------------------|-------------|--------------|
| Learning & Adaptation | 3.2s (ADK), 4.1s (CrewAI) | ~2,500 tokens | ~150MB |
| Exploration & Discovery | 5.8s (ADK), 7.2s (CrewAI) | ~4,800 tokens | ~220MB |
| Evolutionary Curriculum | 12.5s (ADK), 15.8s (CrewAI) | ~8,200 tokens | ~280MB |
| Resource Optimization | 2.1s (ADK), 2.8s (CrewAI) | ~1,200 tokens | ~120MB |
| Prioritization | 3.5s (ADK), 4.3s (CrewAI) | ~2,800 tokens | ~160MB |
| Checkpoint & Rollback | 4.2s (ADK), 5.1s (CrewAI) | ~3,100 tokens | ~180MB |
| Exception Handling | 6.8s (ADK), 8.2s (CrewAI) | ~3,500 tokens | ~190MB |
| Goal Monitoring | 8.5s (ADK), 10.2s (CrewAI) | ~5,600 tokens | ~240MB |

### Scalability

**ADK Advantages:**
- Better for high-throughput production systems (20-35% faster)
- Native support for complex orchestration patterns
- Lower memory footprint
- Built-in state management and persistence

**CrewAI Advantages:**
- Faster development and prototyping
- Simpler mental model for discrete tasks
- Better for discrete, one-off operations
- Extensive tool ecosystem

### Cost Optimization

**Strategies:**
1. **Dynamic Model Switching** - Route 80-90% queries to cheap models
2. **Caching** - Cache frequent query results
3. **Batching** - Combine multiple operations where possible
4. **Early Termination** - Exit loops when goals achieved
5. **Selective Logging** - Log only critical events in production

**Expected Savings:**
- Resource-aware optimization: 60-70% cost reduction
- Caching: 30-40% reduction for repeated queries
- Batching: 15-25% reduction in API calls

---

## =' Development Setup

### Environment Configuration

```bash
# Create project-specific config
cat > .env << EOF
# API Keys (optional for examples with simulated data)
GOOGLE_API_KEY=your_key_here
OPENAI_API_KEY=your_key_here

# Model Configuration
DEFAULT_MODEL=gemini-2.5-flash-exp
EXPENSIVE_MODEL=gemini-1.5-pro

# Monitoring
ENABLE_METRICS=true
LOG_LEVEL=INFO
EOF
```

### Dependencies

All examples use PEP 723 inline script metadata for dependency management:

```python
# /// script
# dependencies = [
#     "google-adk>=1.0.0",
#     "pydantic>=2.0.0",
# ]
# ///
```

No manual installation required - `uv run` handles everything!

---

## =ï¿½ Related Documentation

- **Article 1:** Foundational Patterns (Prompt Chaining, Routing, Tool Use, etc.)
- **Article 2:** Orchestration & Collaboration (Multi-Agent, MCP, A2A, RAG, etc.)
- **Article 3:** Intelligence & Learning (This article)
- **Article 4:** Production & Safety (Guardrails, HITL, Monitoring, etc.)

**Main Documentation:** [`/docs/AI_Agents_ADK_CREWAI_Patterns_with_Diagrams_EN.md`](../docs/AI_Agents_ADK_CREWAI_Patterns_with_Diagrams_EN.md)

---

## > Contributing

### Adding New Patterns

1. Create both ADK and CrewAI implementations
2. Follow existing file structure and naming
3. Include comprehensive docstrings
4. Add realistic business use case
5. Update this README with pattern description
6. Add benchmark configuration

### Code Style

- Use type hints throughout
- Include comprehensive docstrings
- Follow PEP 8 style guide
- Add inline comments for complex logic
- Include error handling and logging

---

## =ï¿½ License

This project is part of the Agentic Design Patterns educational series.

**Author:** Matteo Gazzurelli
**Repository:** [agentic-patterns](https://github.com/Gazzumatteo/agentic-patterns)
**Medium Series:** [AI Agents - Architectural Patterns](https://medium.com/@gazzumatteo)

---

## <ï¿½ Key Takeaways

1. **Learning patterns** enable agents to improve through experience and feedback
2. **Exploration patterns** discover novel insights across disparate data sources
3. **Optimization patterns** balance cost, quality, and performance dynamically
4. **Fault tolerance patterns** ensure robustness in production environments
5. **Monitoring patterns** track progress and adapt strategies in real-time

**ADK** excels in production systems requiring performance and complex orchestration.
**CrewAI** excels in rapid prototyping and discrete task automation.

Choose the right framework based on your specific requirements:
- **Production systems with strict SLAs** ï¿½ ADK
- **Rapid prototyping and experimentation** ï¿½ CrewAI
- **Complex multi-step workflows** ï¿½ ADK
- **Simple discrete tasks** ï¿½ CrewAI
- **High-throughput requirements** ï¿½ ADK
- **Developer experience priority** ï¿½ CrewAI

---

**Next:** Explore Article 4 for production-ready patterns including guardrails, human-in-the-loop, and advanced monitoring strategies.
